{% load static %}
<!DOCTYPE html>
<html lang = 'en'>
	<head>
		{% include "groovesweeperapp/bootstrap.html" %}
		{% include "groovesweeperapp/javascript.html" %}
		<link rel="stylesheet" href="{% static 'allpages.css' %}">
		<link rel="stylesheet" href="{% static 'results.css' %}">
		<title>Results Page</title>
	</head>

	<body>
		{% include "groovesweeperapp/navBar.html" %}
		<h1 class = "text-center">Results for "{{query}}"</h1>
		<div class = "container">
		<div class = "row justify-content-center">
			<div class = "col-auto border-right rounded"
			style = "background-color: #fff2cc;
					padding: 30px;">
				<table>
					{% for obj in results %}
					<tr class = "clickable-row {{obj.is_explicit}}-row" onclick="window.location='/{{obj.id}}/lyrics'">
						<td class = "result-box" >{{obj.name}}</td>
						<td class = "result-box">{{obj.artist}}</td>
						<td class = "result-box">{{obj.num_explicit}}</td>
					</tr>

					{% endfor %}
				</table>
			</div>
		</div>
	</div>
	</body>
</html>


<script>
  src="https://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous">
</script>

<script>
	function goToLyrics(song_idx,song_id) {
		$.ajax({
			//url:"/"+song_id+"/lyrics/"
			type:"POST",
			headers:{
        "X-CSRFToken": '{{ csrf_token }}'
			},
			data:{
							index:song_idx,
							id:song_id
						}
		}).done(function (data) {
    if (data.success) {
        window.location.href = "/"+data.id+"/lyrics/";
    }
	}
</script>
